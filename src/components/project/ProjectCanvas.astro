---
import { Image } from "astro:assets";
import {
    AspectRatio,
    Box,
    Button,
    Flex,
    Heading,
    Text,
} from "@radix-ui/themes";
import { ArrowRightIcon } from "@radix-ui/react-icons";

interface Props {
    images?: (string | ImageMetadata)[];
    title?: string;
    description?: string;
    href?: string;
}

const { images = [], title, description, href } = Astro.props;

const PLACEHOLDERS = [
    "https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe",
    "https://images.unsplash.com/photo-1614851099511-773084f6911d",
    "https://images.unsplash.com/photo-1620641788421-7a1c342ea42e",
];

const finalImages = [...images, ...PLACEHOLDERS.slice(images.length, 3)];

const Container: any = href ? "a" : Flex;
const elementProps = href
    ? {
          href,
          class: "project-canvas-container project-canvas-link",
      }
    : {
          class: "project-canvas-container",
          direction: "column",
          gap: "5",
      };
---

{
    (
        <Container {...elementProps}>
            {/* Image Canvas */}
            <AspectRatio ratio={3 / 2}>
                <Flex
                    overflow="hidden"
                    align="center"
                    justify="center"
                    className="project-canvas-image-wrapper"
                >
                    <Button
                        variant="ghost"
                        tabIndex={-1}
                        className="hover-button"
                    >
                        <ArrowRightIcon
                            style={{ width: "var(--space-5)", height: "auto" }}
                        />
                    </Button>

                    <Flex
                        width="120%"
                        height="80%"
                        align="center"
                        justify="center"
                        gap="4"
                    >
                        {finalImages.map((src, i) => (
                            <Box key={i} className="project-canvas-image-item">
                                {typeof src === "string" ? (
                                    <Image
                                        src={src}
                                        alt=""
                                        inferSize={true}
                                        class="project-canvas-image"
                                    />
                                ) : (
                                    <Image
                                        src={src}
                                        alt=""
                                        class="project-canvas-image"
                                    />
                                )}
                            </Box>
                        ))}
                    </Flex>
                </Flex>
            </AspectRatio>

            {/* Title and Description */}
            {(title || description) && (
                <Flex direction="column" gap="2">
                    {title && (
                        <Heading
                            as="h2"
                            size="3"
                            weight="medium"
                            highContrast
                            className="project-canvas-heading"
                        >
                            {title}
                        </Heading>
                    )}
                    {description && (
                        <Text
                            size="3"
                            as="p"
                            wrap="pretty"
                            className="project-desc-clip"
                        >
                            {description}
                        </Text>
                    )}
                </Flex>
            )}
        </Container>
    )
}
